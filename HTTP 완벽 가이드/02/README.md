# 2장 URL과 리소스

URL은 인터넷의 리소스를 가리키는 표준 이름

## URL의 구조

- `스킴://서버위치/경로`
- URL이 등장하기 전에는 애플리케이션마다 다른 분류 방식 사용
- 별도의 뉴스 리더나 FTP 클라이언트, 메일 프로그램 없이도 웹브라우저만 있으면 됨
- URL 덕분에 온라인을 단순화하고 정보에 쉽게 접근할 수 있게 됨

## URL 문법

- 서로 다른 스킴도 일반적인 URL 문법을 따름
- 형태와 문법 면에서 매우 유사
- `<스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>`
- 스킴: 리소스를 가져오려면 어떤 프로토콜 사용해야 하는지
    - 스킴 컴포넌트는 알파벳으로 시작해야함
    - 대소문자 구분 안 함
    - URL 나머지 부분들과 콜론(:)으로 구분
- 사용자 이름: 일부 스킴 사용 시 필요
    - 기본 사용자 이름 값은 anonymous
- 비밀번호: 일부 스킴 사용 시 필요
    - 기본 비밀번호는 브라우저 기본값
    - :으로 사용자 이름과 비밀번호 구분하고 @으로 호스트와 구분
- 호스트: 호스팅하는 서버의 호스트명이나 IP 주소
- 포트: 호스팅하는 서버가 열어놓은 포트 번호
    - UNIX 파일 시스템의 파일 경로와 유사(/ 사용)
- 경로: 서버 내 리소스가 어디에 위치하는지
    - 각 경로 조각은 각각 파라미터 컴포넌트를 가질 수 있음
- 파라미터: 특정 스킴들에서 입력 파라미터를 기술하는 용도
    - 다른 파라미터나 경로의 일부와 세미콜론(;)으로 구분하여 기술
    - 스킴이 요구하는 추가 정보를 기술
    - ex) FTP의 파일 포맷(바이너리/텍스트)
- 질의(쿼리): 스킴에서 애플리케이션에 파라미터를 전달하는데 쓰임
    - URL의 끝에 ?으로 구분
    - 데이터베이스 같은 서비스가 요청 받을 리소스의 형식의 범위를 좁히기 위해 사용
    - 대부분의 게이트웨이가 &으로 나누니 '이름=값' 쌍 형식의 문자열을 받음
- 프래그먼트: 리소스의 조각이나 일부분을 가리키는 이름
    - 서버에는 전달되지 않고 클라이언트에서만 사용됨

## 단축 URL

- 상대 URL: URL을 짧게 표기하는 방식
    - 기저(base) URL이라는 다른 URL 사용
    - ex) ./hammers.html -> 현재 문서의 URL 기준으로 상대 경로
    - URL을 처리하는 애플리케이션은 상대 URL과 절대 URL간에 상호 변환을 할 수 있어야 함

## 안전하지 않은 문자

- 안전한 전송: 정보가 유실될 위험 없이 URL 전송할 수 있어야 함
- but, SMTP 등은 특정 문자를 제거할 수 있음
- 보통, 안전한 US-ASCII 문자 집합만 포함 허용
- 다른 문자 사용하려면 이스케이프 처리해야 함
- URL 인코딩: ASCII 이외 문자나 바이너리 데이터 등을 포함하기 위해 이스케이프 문자열을 사용하여 인코딩함
- 이스케이프 문자열: 퍼센트(%) + ASCII 코드 16진수 숫자
    - ex) ~: ASCII로는 126(0x7E) -> %7E
- 제한된 문자(혼동 방지 및 다른 용도 사용 목적)
    - %, /, ., .., #, ?, ;, :, $, +, @, &, =, {, } 등
- 안전하지 않은 문자를 사용해도 문제가 발생하지 않을 수 있음
    - but, 애플리케이션에서 안전하지 않은 문자를 이스케이프하지 않은 것은 실수
    - 가장 좋은 방법은 웹 브라우저 같은 클라이언트 애플리케이션이 인코딩하는 것

## 여러 스킴들

- ex) http, https, mailto, ftp, rtsp(실시간 스트리밍), rtspu(udp 사용), file(로컬, 네트워크 파일 시스템 파일), news, telnet

## URL의 미래

- URL은 주소이지 실제 이름은 아님
- 특정 시점에 어떤 것이 위치한 곳을 알려주는 것
- 객체의 현재 위치와 상관없이 실제 객체의 이름을 사용할 수 있어야
    - IETF가 URN이라는 새로운 표준 작업에 착수
    - PURL(Persistent URL)을 사용하면 URL로 URN의 기능 제공 가능
        - PURL은 리소스의 실제 URL 목록을 관리하고 추적하는 중개 서버를 두고 해당 리소스를 우회적으로 제공
    - URL은 한계가 있지만, 아직 대체되려면 오랜 시일이 걸릴 것
